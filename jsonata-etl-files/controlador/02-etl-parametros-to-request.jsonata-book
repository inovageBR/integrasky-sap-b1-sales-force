[{"kind":2,"language":"jsonata","value":"$loadFile('./jsonata-etl-files/controlador/02-etl-parametros-to-request.json')","outputs":[{"mime":"text/x-json","value":{"result":{"LastRun":[{"Code":"8d25904d-57f2-4d15-a33c-827076f2f665","Name":"8d25904d-57f2-4d15-a33c-827076f2f665","U_TgtObj":"Products","U_SrcObj":"OITM","U_LastRun":"2023-07-21_16:07:40","U_Status":"S","U_Summary":"Integração Z"}],"SrcParams":{"SrcObjt":"OITM","TgtObj":"Products","SrcRequest":{"path":"Items","query":"__INTEGRA_DOLLAR_REPLACEMENT__select=ItemCode,ItemName,UpdateDate,UpdateTime&__INTEGRA_DOLLAR_REPLACEMENT__orderby=UpdateDate,UpdateTime&__INTEGRA_DOLLAR_REPLACEMENT__filter=UpdateDate ge '{{updateDate}}' and UpdateTime ge '{{updateTime}}'"}}}}}]},{"kind":2,"language":"jsonata","value":"(\r\n    $toQuery:= function($n){ \r\n        $n ~> \r\n        $string() ~> \r\n        $replace(\"{{updateDate}}\", $split($.result.LastRun[0].U_LastRun,\"_\")[0]) ~>\r\n        $replace(\"{{updateTime}}\", $split($.result.LastRun[0].U_LastRun,\"_\")[1]) ~>\r\n        $replace(\"__INTEGRA_DOLLAR_REPLACEMENT__\",\"$\")\r\n    };\r\n    \r\n    {\r\n        \"path\": $.result.SrcParams.SrcRequest.path,\r\n        \"query\": $toQuery($.result.SrcParams.SrcRequest.query),\r\n        \"maxPageSize\":\"odata.maxpagesize=9999\"\r\n    }\r\n)\r\n","outputs":[{"mime":"text/x-json","value":{"path":"Items","query":"$select=ItemCode,ItemName,UpdateDate,UpdateTime&$orderby=UpdateDate,UpdateTime&$filter=UpdateDate ge '2023-07-21' and UpdateTime ge '16:07:40'","maxPageSize":"odata.maxpagesize=9999"}}]}]